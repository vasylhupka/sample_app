!function(){var e=tinymce.extend;tinymce.create("tinymce.plugins.ImprovedCodePlugin",{init:function(t,n){var i=this;i.settings=e({height:580,indentUnit:4,tabSize:4,lineWrapping:!0,lineNumbers:!0,autoIndent:!0,optionsBar:!0,theme:"default"},t.getParam("improvedcode_options")),t.addCommand("mceImprovedCode",function(){t.focus(),t.selection.collapse(!0),t.selection.setContent('<span class="CuRCaRet" style="display:none">&#0;</span>');var e=i.settings.height,o=t.dom.getViewPort(window).h;e>o&&(e=.9*o),t.windowManager.open({title:"Improved HTML Source Editor",url:n+"/improvedcode.htm",width:720,height:e,inline:!0,resizable:!0,maximizable:!0},{plugin_url:n,settings:i.settings})}),t.addButton("improvedcode",{title:"Improved HTML code Editor",cmd:"mceImprovedCode",image:n+"/img/htmlplus.gif",onPostRender:function(){var e=this;t.on("NodeChange",function(t){e.active("IMG"==t.element.nodeName)})}})},createControl:function(){return null},getInfo:function(){return{longname:"Improved source code highlighter plugin",author:"Agustin Villalba",authorurl:"http://www.agustinvillalba.com",infourl:"http://www.agustinvillalba.com/portfolio.html",version:"1.3.1"}}}),tinymce.PluginManager.add("improvedcode",tinymce.plugins.ImprovedCodePlugin)}();